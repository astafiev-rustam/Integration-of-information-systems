|||
|---|---|
|ДИСЦИПЛИНА|Интеграция информационных систем с использованием API и микросервисов|
|Подразделение|ПИШ СВЧ-электроники|
|ВИД УЧЕБНОГО МАТЕРИАЛА|Методические указания к практическим занятиям|
|ПРЕПОДАВАТЕЛЬ|Астафьев Рустам Уралович|
|СЕМЕСТР|1 семестр, 2024/2025 уч. год|

Ссылка на GitHub репозиторий:
https://github.com/astafiev-rustam/Integration-of-information-systems/tree/Practice-1-4

## Практическое занятие №4 - Обзор платформ (Apache Camel, MuleSoft, RabbitMQ). Практика использования брокеров сообщений и шины данных

**Введение в проблематику**
В современной цифровой экосистеме предприятия редко существуют как изолированные системы. Типичная организация сегодня использует десятки разнородных приложений — от унаследованных ERP-систем до облачных микросервисов. Возникает ключевой вопрос: как обеспечить их слаженное взаимодействие без создания хрупких точечных интеграций? Именно на этом занятии мы будем осваивать профессиональный подход к проектированию надежных интеграционных решений.

**Теоретические основы**
При проектировании интеграционной архитектуры перед нами открываются два принципиально разных, но дополняющих друг друга подхода. Первый — это использование Enterprise Service Bus (ESB), представляющего собой централизованную "шину" для трансформации и маршрутизации сообщений. Второй — применение брокеров сообщений, организующих асинхронное взаимодействие между системами через очереди.

ESB-решения вроде Apache Camel или MuleSoft особенно эффективны в сценариях, где требуется сложная обработка сообщений: трансформация форматов (например, XML в JSON), обогащение данных, маршрутизация по бизнес-правилам. Они выступают как своеобразные "переводчики" между разными системами, уменьшая количество прямых соединений между компонентами архитектуры.

Брокеры сообщений (RabbitMQ, Apache Kafka) решают другую задачу — они обеспечивают надежную асинхронную коммуникацию. Когда система А отправляет сообщение системе Б через брокер, ей не нужно ждать ответа — сообщение будет доставлено даже если система Б временно недоступна. Это особенно критично для событийно-ориентированных архитектур и обработки пиковых нагрузок.

**Кейс для практической работы**
Рассмотрим реальную ситуацию из розничной торговли. Сеть супермаркетов внедряет новую цифровую экосистему, включающую:
1. Мобильное приложение для покупателей
2. Кассовую систему на базе 1С
3. CRM-систему Salesforce
4. Систему складского учета WMS
5. Аналитическую платформу на Hadoop

**Практическое задание**
Ваша задача — разработать архитектурное решение, обеспечивающее:
- Мгновенное обновление баланса бонусной программы при оплате на кассе
- Асинхронную передачу данных о покупках в CRM и аналитику
- Интеграцию с системой складского учета для контроля остатков

Для выполнения:
1. Определите, какие взаимодействия должны быть синхронными, а какие — асинхронными
2. Выберите подходящие технологии (ESB и/или брокеры сообщений) для каждого сценария
3. Спрогнозируйте потенциальные узкие места
4. Опишите схему обработки ошибок

**Пример решения для бонусной системы**
"Обновление бонусного баланса при оплате требует синхронного взаимодействия между кассовой системой и CRM, так как кассир должен видеть актуальный статус в момент оплаты. Однако для этого не следует создавать прямое соединение 1С-Salesforce. Лучше использовать ESB (например MuleSoft) в качестве промежуточного слоя, который:
- Примет SOAP-запрос от 1С
- Трансформирует его в формат REST, понятный Salesforce
- Обработает возможные ошибки (например, если CRM недоступен)
- Вернет унифицированный ответ на кассу

При этом передача данных о покупках в аналитическую систему должна быть асинхронной через Kafka, так как:
- Допустима задержка обработки
- Требуется высокая пропускная способность в часы пик
- Возможна batch-обработка на стороне Hadoop"

**Типичные ошибки проектирования**
В ходе разбора решений особое внимание уделим распространенным ошибкам:
- Использованию ESB там, где достаточно простой очереди сообщений
- Попыткам решить все интеграционные задачи через один инструмент
- Недооценке требований к отказоустойчивости
- Игнорированию вопросов мониторинга интеграционных потоков

**Заключительная дискуссия**
По итогам занятия проведем сравнительный анализ представленных решений, обращая внимание на:
- Соответствие бизнес-требованиям
- Запас масштабируемости
- Удобство сопровождения
- Общую стоимость владения решением

**Домашнее задание**
Спроектируйте интеграционную платформу для банка, где необходимо связать:
1. Основную банковскую систему (IBM Mainframe)
2. Мобильное приложение
3. Систему скоринга
4. Регуляторную отчетность

Укажите для каждого интеграционного потока:
- Используемую технологию
- Ожидаемую нагрузку
- Требования к надежности
- Механизмы обработки ошибок
